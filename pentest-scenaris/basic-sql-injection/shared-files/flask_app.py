from flask import Flask, render_template, request
from flask_mysqldb import MySQL

app = Flask(__name__)

# Récupération de l'ip bdd
with open('/vagrant/shared/dbIpAddr.txt', 'r') as f:
    dbAddr = f.readline()
    print("L'adresse de la bdd est :",dbAddr)
    app.config['MYSQL_HOST'] = dbAddr

app.config['MYSQL_USER'] = 'root'
app.config['MYSQL_PASSWORD'] = 'root'
app.config['MYSQL_DB'] = 'MonSite'

mysql = MySQL(app)
try :
    cursor = mysql.connection.cursor()
    cursor.execute("SELECT * from Users")
except Exception as e:
    print("Erreur de connexion à la BDD")

@app.route('/')
def frontend():
    return render_template('formulaire-connexion.html', name="Frontend")

if __name__ == '__main__':
    app.run(host='0.0.0.0')